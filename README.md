# naga-error
This crate is designed to demonstrate a circumstance in which Naga is unable to
translate WGSL into functioning SPIR-V.

## The Issue
Any SPIR-V binary generated from the `src/template.wgsl` file is not functional
in the WGPU render pipeline in `src/main.rs`, regardless of whether Naga is
being used as a standalone CLI or as a library. However, using Tint to translate
the `src/template.wgsl` file into SPIR-V does produce a functional SPIR-V
binary. Using `src/template.wgsl` directly in the WGPU render pipeline also
works.

## System Information
 * OS: Linux Kubuntu 20.04.2 LTS
 * Rust Version: rustc 1.55.0-nightly (f586d79d1 2021-06-13)
 * Naga Version: 0.4.2
 * WGPU Version: 0.8.1
 * Tint Version: commit 52b6a004b8b74ca2750b927bd020fdd8352db4fa

## Running
This create is designed to be run with only one of the four possible shader
provider features enabled. These shader provider features are:
 * `use-naga-lib` - To use Naga as a library for translating WGSL into SPIR-V.
 * `use-naga-spv` - To use the SPIR-V binary generated by the Naga CLI.
 * `use-tint-spv` - To use the SPIR-V binary generated by the Tint CLI.
 * `use-wgsl-src` - To use the WGSL shader source directly.

## How the SPIR-V Binaries Were Generated
The `template.naga.spv` SPIR-V binary was generated by using the command:
```shell
naga template.wgsl template.naga.spv
```

The `template.tint.spv` SPIR-V binary was generated by using the command:
```shell
tint --format spirv -o template.tint.spv template.wgsl
```
